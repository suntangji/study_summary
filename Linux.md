1. 僵尸进程和孤儿进程是什么，有什么危害
    
    1) 僵尸进程：一个进程使用fork创建子进程，如果子进程退出，而父进程并没有获取子进程的状态，那么子进程的相关信息仍然保留在进程表中。这种进程称之为僵尸进程。
    僵尸进程会一直占用系统资源，造成资源浪费。大量的僵尸进程可能造成无法创建新进程。
    2) 孤儿进程：父进程退出，而它的一个或多个子进程还在运行，那么那些子进程将成为孤儿进程。孤儿进程将被init进程(进程号为1)领养，所以孤儿进程没有实质性的危害。

2. 什么是守护进程
    1) 守护进程也称精灵进程(Daemon),是运行在后台的一种特殊进程，它独立于控制终端，在后台运行，不能直接和用户交互。与会话无关、会话关闭仍然可以运行。在系统启动时经常以 root 权限运行。
    2) Linux 下查看守护进程
        ps axj, TPGID == -1 的进程
    3) 创建守护进程
        守护进程需要摆脱原会话，摆脱原进程组，摆脱终端控制。创建守护进程一般步骤:
        - 调用 fork 创建子进程，父进程直接退出，使 shell 认为程序已经运行完毕，达到脱离终端控制，同时保证子进程不是进程组的组长，防止调用 setsid 时出错。
        - 在子进程中调用 setsid 创建新的会话
        - 再次 fork 一个子进程，父进程退出，保证子进程不是会话首进程，从而保证子进程不能与终端关联。
        - 调用 chdir 使根目录成为子进程的工作目录
        - 调用 umask 更改进程的文件掩码
        - 忽略 SIGCHLD 信号，避免僵尸进程
        - 在子进程中关闭不需要的文件描述符

        或者调用 daemon 函数，使用 nohup 命令也可以达到类似守护进程的效果

3. 进程和线程的区别
    进程是资源分配基本单位，线程是进程的一个实体，是 CPU 调度的基本单位。进程的创建、销毁、切换开销较大。每个进程都有自己的虚拟地址空间，线程共用虚拟地址空间。进程更加稳定，一个进程崩溃后，其他进程无影响。一个线程崩溃后，整个线程组都会崩溃。进程间通信需要使用额外的手段，线程间通信可以使用全局变量、信号，但是需要同步互斥机制。

4. 进程间通信
    1) 管道 (内核提供的一块内存)
        - 半双工，全双工要开两个管道
        - 只能在有亲缘关系的进程间使用
        - 面向字节流
        - 生命周期随进程
    2) 命名管道(FIFO)
        - 可以用于任意进程,速度慢
    3) 消息队列 (内核提供的链表)
        - 面向数据报，需要考虑上一次没读完的问题
        - 生命周期随内核，进程结束，消息队列仍存在
    4) 共享内存
        - 速度最快，但需要同步
    5) 信号量
        - 不能传递复杂数据，主要用来同步
    6) socket
        - 可以跨主机通信
